suite: Test ServiceAccount Manifest
templates:
  - manifests.yaml
tests:

##
## Passing Test Scenarios
##

  ##
  ## Set all available Values (Check Defaults)
  - it: Full Configured (Snapshot)
    values:
      - ./values/manifests/serviceAccount.yaml
    asserts:
      - matchSnapshot: {}

  ##
  ##
  - it: ServiceAccount Disabled
    set:
      unit:
        manifests: 
          serviceaccount:
            enabled: false
    asserts:
      - hasDocuments:
          count: 0

  ##
  ##
  - it: ServiceAccount Disabled but Disabled Creation
    set:
      unit:
        manifests: 
          serviceaccount:
            enabled: true
            create: false
    asserts:
      - hasDocuments:
          count: 0

  ##
  ##
  - it: Custom ServiceAccount Name
    values:
      - ./values/manifests/serviceAccount.yaml
    set:
      unit:
        manifests: 
          serviceaccount:
            name: sample
    asserts:
      - equal:
          path: metadata.name
          value: "sample"

